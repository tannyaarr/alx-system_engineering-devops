#!/usr/bin/env bash
# Displays information about subdomains

print_domain_subdomain () {
    dig +short "$1.$2" | awk -v subdomain="$1" -v record_type="$2" -v domain="$3" '
        BEGIN { found = 0 }
        {
            found = 1;
            print "The subdomain " subdomain " is a " $1 " record and points to " $2
        }
        END { if (found == 0) print "The subdomain " subdomain " does not have a record in the domain " domain }
    '
}

if [ "$#" -eq 1 ]; then
    domain="$1"
    subdomains=("www" "lb-01" "web-01" "web-02")

    for subdomain in "${subdomains[@]}"; do
        print_domain_subdomain "$subdomain" "$domain" "$domain"
    done
elif [ "$#" -eq 2 ]; then
    domain="$1"
    subdomain="$2"
    print_domain_subdomain "$subdomain" "$domain" "$domain"
else
    echo "Usage: $0 <domain> [subdomain]"
    exit 1
fi
